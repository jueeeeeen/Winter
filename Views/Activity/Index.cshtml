@{
    ViewData["Title"] = "Activity";
}

<all-act-banner></all-act-banner>

<search-bar></search-bar>
@* @ViewBag.keyword *@
@* for showing search keyword that is sent to back *@

<tag-filter></tag-filter>

<ul id="show-tags"></ul>
@* for showing selected tags that are sent to back *@

<div id="all-activities-container">
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
    <act-card></act-card>
</div>


<div class="pagination-container flex round shadow">
    <pagination-item data-value="prev"></pagination-item>
    <pagination-item data-value="1"></pagination-item>
    <pagination-item data-value="2"></pagination-item>
    <pagination-item data-value="3"></pagination-item>
    <pagination-item data-value="..."></pagination-item>
    <pagination-item data-value="8"></pagination-item>
    <pagination-item data-value="9"></pagination-item>
    <pagination-item data-value="10"></pagination-item>
    <pagination-item data-value="next"></pagination-item>
</div>

<script>
    window.onload = async function() {
        const activity_container = document.getElementById("all-activities-container");

        try {
            const response = await fetch('/Activity/GetActivityCards', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify("")  // Make sure 'data' is defined or pass it as needed
            });

            const activities = await response.json();
            console.log(activities);  // This will log the activities returned by the server

            activity_container.innerHTML = '';

            activities.forEach(activity => {
                const activityCard = new ActivityCard(activity);  // Create an instance of ActivityCard
                activity_container.appendChild(activityCard);  // Append it to the container
            })

        } catch (error) {
            console.error(error);
        }
    };
</script>